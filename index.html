<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CyberSci-Dash v2 | Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Investor Command HUD - Real-time market dashboard for actionable investing.">
  <link rel="stylesheet" href="css/styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;900&family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="icon" href="images/favicon.ico">
  <script src="jsscripts.js/jsscripts.js"></script>
</head>
<body class="bg-gray-900 text-white font-inter">
  <header class="px-6 py-4 flex justify-between items-center border-b border-cyan-400 shadow-lg">
    <h1 class="text-3xl font-orbitron tracking-widest text-cyan-400">CyberSci-Dash v2</h1>
    <nav class="space-x-6 text-lg font-orbitron tracking-wide">
      <a href="index.html" class="text-pink-400 border-b-2 border-pink-400 pb-1" aria-label="Dashboard">Dashboard</a>
      <a href="warroom.html" class="hover:text-cyan-400" aria-label="War Room">War Room</a>
      <a href="macro.html" class="hover:text-cyan-400" aria-label="Macro">Macro</a>
      <a href="crypto.html" class="hover:text-cyan-400" aria-label="Crypto">Crypto</a>
      <a href="sentiment.html" class="hover:text-cyan-400" aria-label="Sentiment">Sentiment</a>
      <a href="senario.html" class="hover:text-cyan-400" aria-label="Scenario Builder">Scenario Builder</a>
      <a href="insights.html" class="hover:text-cyan-400" aria-label="Insights">Insights</a>
      <a href="links.html" class="hover:text-cyan-400" aria-label="Quick Links">Quick Links</a>
    </nav>
  </header>

  <main class="p-6 max-w-7xl mx-auto">
    <!-- Regime + Trigger Card -->
    <section class="mb-8 rounded-2xl border-2 border-cyan-400 shadow-cyan-400/40 shadow-xl bg-gradient-to-br from-gray-900 via-gray-800 to-cyan-900 px-8 py-7">
      <h2 class="text-2xl font-orbitron text-cyan-300 mb-4 tracking-widest">InvestorOS — Regime</h2>

      <div class="grid md:grid-cols-3 gap-6">
        <div class="p-4 rounded-xl border border-cyan-400/60 bg-gray-900/40">
          <div class="text-sm text-gray-300">Bias</div>
          <div id="biasState" class="text-2xl font-bold">…</div>
          <div class="text-xs text-gray-400 mt-2">Updated: <span id="lastUpdate">…</span></div>
        </div>

        <div class="p-4 rounded-xl border border-cyan-400/60 bg-gray-900/40">
          <div class="text-sm text-gray-300 mb-2">Top Triggers</div>
          <ul class="space-y-1 text-sm">
            <li><span id="t1">…</span></li>
            <li><span id="t2">…</span></li>
            <li><span id="t3">…</span></li>
          </ul>
        </div>

        <div class="p-4 rounded-xl border border-cyan-400/60 bg-gray-900/40">
          <div class="text-sm text-gray-300">Next Review</div>
          <div id="nextReview" class="text-xl font-semibold">…</div>
          <div class="text-xs text-gray-400 mt-2">Rule: no action without 2+ confirmations</div>
        </div>
      </div>
    </section>

    <!-- Hero HUD Section -->
    <section class="mb-8 rounded-2xl border-2 border-cyan-400 shadow-cyan-400/40 shadow-xl bg-gradient-to-br from-gray-900 via-gray-800 to-cyan-900 px-8 py-7">
      <div class="flex flex-col md:flex-row md:space-x-12">
        <!-- Cycle Status Block -->
        <div class="flex-1 mb-8 md:mb-0">
          <h2 class="text-2xl font-orbitron text-cyan-300 mb-4 tracking-widest">Cycle Status</h2>
          <table class="w-full text-center cycle-table mb-2" aria-label="Cycle Status Table">
            <thead>
              <tr>
                <th>Cycle</th>
                <th>Count</th>
                <th>Completed</th>
                <th>Avg Cycle</th>
                <th>Direction</th>
                <th>Confidence</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>60-Day</td>
                <td>4</td>
                <td>
                  <div class="prog-bar"><div style="width:7%"></div></div>7%
                </td>
                <td>58d</td>
                <td><span class="text-green-400 font-bold">&#8593; Rising</span></td>
                <td><span class="text-cyan-400 font-bold">High</span></td>
                <td><span class="status-dot inline-block bg-green-400"></span></td>
              </tr>
              <tr>
                <td>Weekly</td>
                <td>9</td>
                <td>
                  <div class="prog-bar"><div style="width:36%"></div></div>36%
                </td>
                <td>25w</td>
                <td><span class="text-green-400 font-bold">&#8593; Rising</span></td>
                <td><span class="text-cyan-400 font-bold">High</span></td>
                <td><span class="status-dot inline-block bg-green-400"></span></td>
              </tr>
              <tr>
                <td>4-Year</td>
                <td>31</td>
                <td>
                  <div class="prog-bar"><div style="width:65%"></div></div>65%
                </td>
                <td>48mo</td>
                <td><span class="text-green-400 font-bold">&#8593; Rising</span></td>
                <td><span class="text-cyan-400 font-bold">High</span></td>
                <td><span class="status-dot inline-block bg-green-400"></span></td>
              </tr>
            </tbody>
          </table>
          <div class="mt-3 text-gray-200 text-xs">
            <strong>Note:</strong> End of cycle may fake out before reversal.<br>
            Confidence can change based on price action. Status is guidance, not absolute.
          </div>
        </div>
        <!-- Live Market Gauges -->
        <div class="flex-1 space-y-6">
          <div class="bg-gray-800 border border-cyan-500 rounded-xl p-4 shadow">
            <h3 class="font-orbitron text-lg text-cyan-300 mb-2">Market Overview</h3>
            <div class="grid grid-cols-2 gap-3 text-base">
              <div>BTC Price:</div> <div id="btc-price" class="font-bold text-yellow-300" aria-live="polite">...</div>
              <div>ETH Price:</div> <div id="eth-price" class="font-bold text-green-300" aria-live="polite">...</div>
              <div>SPX:</div> <div id="spx-latest" class="font-bold text-blue-300" aria-live="polite">...</div>
              <div>USD Index:</div> <div id="usd-latest" class="font-bold text-cyan-300" aria-live="polite">...</div>
              <div>Fear &amp; Greed:</div> <div id="fg-latest" class="font-bold text-pink-400" aria-live="polite">...</div>
            </div>
          </div>
          <div class="flex flex-row space-x-4">
            <div class="bg-gray-800 border border-green-500 rounded-xl p-4 flex-1 shadow">
              <h3 class="font-orbitron text-lg text-green-300 mb-2">Crypto Risk</h3>
              <div id="crypto-risk-gauge" class="gauge-meter"></div>
            </div>
            <div class="bg-gray-800 border border-yellow-500 rounded-xl p-4 flex-1 shadow">
              <h3 class="font-orbitron text-lg text-yellow-300 mb-2">Macro Risk</h3>
              <div id="macro-risk-gauge" class="gauge-meter"></div>
            </div>
          </div>
        </div>
      </div>
      <!-- Alert Ticker -->
      <div class="mt-6 border-t border-cyan-700 pt-3">
        <marquee behavior="scroll" direction="left" scrollamount="6" class="text-pink-400 text-lg font-bold tracking-wide">
          ALERT: Macro Risk Elevated | BTC breaks above 50 DMA | US10Y spiking | Fed statement at 2pm | ...
        </marquee>
      </div>
    </section>

    <!-- Dashboard Action Panel -->
    <section class="mb-10 flex flex-col md:flex-row md:space-x-6">
      <div class="flex-1 mb-8 md:mb-0 bg-gray-800 border border-pink-400 rounded-xl shadow p-6">
        <h2 class="text-xl font-orbitron text-pink-400 mb-2">Current Playbook</h2>
        <ul class="list-disc list-inside text-lg space-y-2">
          <li>Trend: <span class="font-bold text-green-300">Uptrend</span> (Stay long, trail stops)</li>
          <li>Risk: <span class="font-bold text-yellow-300">Moderate</span> (Scale in, consider partial profit)</li>
          <li>Action: <span class="font-bold text-cyan-300">Monitor macro triggers, no full risk</span></li>
        </ul>
        <div class="mt-4 text-gray-300 text-sm">
          <strong>Today’s Guidance:</strong> <span class="text-white">Follow your plan, avoid FOMO, update your scenario in the War Room if conditions change.</span>
        </div>
      </div>
      <div class="flex-1 bg-gray-800 border border-cyan-400 rounded-xl shadow p-6">
        <h2 class="text-xl font-orbitron text-cyan-400 mb-2">Market News</h2>
        <ul class="list-inside text-base space-y-1">
          <li>• CPI print due tomorrow</li>
          <li>• FOMC meeting next Wednesday</li>
          <li>• ETH ETF approval rumors circulating</li>
          <li>• Watch for BTC options expiry Friday</li>
        </ul>
        <div class="mt-2 text-gray-400 text-xs">News auto-updates every hour. <a href="macro.html" class="underline text-pink-400">See macro page for details &rarr;</a></div>
      </div>
    </section>

    <!-- Quick Panel Shortcuts -->
    <section class="flex flex-wrap gap-6 mb-10 justify-center">
      <a href="warroom.html" class="hud-action bg-pink-500 hover:bg-pink-700" aria-label="Enter War Room">Enter War Room</a>
      <a href="senario.html" class="hud-action bg-cyan-500 hover:bg-cyan-700" aria-label="Scenario Builder">Scenario Builder</a>
      <a href="insights.html" class="hud-action bg-yellow-500 hover:bg-yellow-700" aria-label="Get Insights">Get Insights</a>
      <a href="links.html" class="hud-action bg-green-500 hover:bg-green-700" aria-label="Quick Links">Quick Links</a>
    </section>
  </main>

  <footer class="text-center text-gray-400 mt-8 mb-3 text-sm">
    &copy; 2025 CyberSci-Dash. All rights reserved.
  </footer>

  <script>
    // === Live Market Data Fetching ===
    async function fetchMarketData() {
      try {
        // Fetch BTC and ETH prices
        const cryptoRes = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum&vs_currencies=usd');
        const cryptoData = await cryptoRes.json();
        
        document.getElementById('btc-price').textContent = '$' + cryptoData.bitcoin.usd.toLocaleString();
        document.getElementById('eth-price').textContent = '$' + cryptoData.ethereum.usd.toLocaleString();
        
        // Fetch Fear & Greed Index
        const fgRes = await fetch('https://api.alternative.me/fng/?limit=1');
        const fgData = await fgRes.json();
        document.getElementById('fg-latest').textContent = fgData.data[0].value + '/100';
        
        // Mock SPX and USD data (replace with real API if available)
        document.getElementById('spx-latest').textContent = '4,750';
        document.getElementById('usd-latest').textContent = '103.2';
        
        // Update risk gauges
        updateRiskGauges(fgData.data[0].value);
        
      } catch (error) {
        console.log('Market data fetch error:', error);
        // Fallback to mock data
        document.getElementById('btc-price').textContent = '$67,500';
        document.getElementById('eth-price').textContent = '$3,450';
        document.getElementById('spx-latest').textContent = '4,750';
        document.getElementById('usd-latest').textContent = '103.2';
        document.getElementById('fg-latest').textContent = '65/100';
      }
    }
    
    // === Risk Gauge Updates ===
    function updateRiskGauges(fearGreedValue) {
      // Calculate risk levels (0-100)
      const cryptoRisk = Math.min(100, Math.max(0, 100 - fearGreedValue));
      const macroRisk = Math.random() * 60 + 20; // Mock macro risk
      
      // Update crypto risk gauge
      const cryptoGauge = document.getElementById('crypto-risk-gauge');
      const cryptoAngle = (cryptoRisk / 100) * 180 - 90;
      cryptoGauge.style.setProperty('--gauge-rotation', cryptoAngle + 'deg');
      
      // Update macro risk gauge
      const macroGauge = document.getElementById('macro-risk-gauge');
      const macroAngle = (macroRisk / 100) * 180 - 90;
      macroGauge.style.setProperty('--gauge-rotation', macroAngle + 'deg');
      
      // Add risk level text
      cryptoGauge.innerHTML = `<div style="text-align:center;margin-top:1rem;font-weight:bold;">${Math.round(cryptoRisk)}%</div>`;
      macroGauge.innerHTML = `<div style="text-align:center;margin-top:1rem;font-weight:bold;">${Math.round(macroRisk)}%</div>`;
    }
    
    // === Initialize Dashboard ===
    document.addEventListener('DOMContentLoaded', function() {
      fetchMarketData();
      // Refresh every 60 seconds
      setInterval(fetchMarketData, 60000);
    });
  </script>
</body>
</html>