<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CyberSci-Dash v2 | Insights</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Top Analyst Insights - Curated opinions, market wisdom, and actionable strategy from the best minds.">
  <link rel="stylesheet" href="css/styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;900&family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="icon" href="images/favicon.ico">
</head>
<body class="bg-gray-900 text-white font-inter">
  <header class="px-6 py-4 flex justify-between items-center border-b border-yellow-400 shadow-lg">
    <h1 class="text-3xl font-orbitron tracking-widest text-yellow-400">CyberSci-Dash v2</h1>
    <nav class="space-x-6 text-lg font-orbitron tracking-wide">
      <a href="index.html" class="hover:text-cyan-400" aria-label="Dashboard">Dashboard</a>
      <a href="warroom.html" class="hover:text-pink-400" aria-label="War Room">War Room</a>
      <a href="macro.html" class="hover:text-yellow-400" aria-label="Macro">Macro</a>
      <a href="crypto.html" class="hover:text-green-400" aria-label="Crypto">Crypto</a>
      <a href="sentiment.html" class="hover:text-pink-400" aria-label="Sentiment">Sentiment</a>
      <a href="scenario.html" class="hover:text-cyan-400" aria-label="Scenario Builder">Scenario Builder</a>
      <a href="insights.html" class="text-yellow-400 border-b-2 border-yellow-400 pb-1" aria-label="Insights">Insights</a>
      <a href="links.html" class="hover:text-cyan-400" aria-label="Quick Links">Quick Links</a>
    </nav>
  </header>

  <main class="p-6 max-w-5xl mx-auto">
    <!-- AI INTELLIGENCE BRIEFING CARD -->
    <section class="mb-10 rounded-2xl border-2 border-emerald-400 shadow-emerald-400/40 shadow-xl bg-gradient-to-br from-gray-900 via-gray-800 to-emerald-900 px-8 py-8">
      <h2 class="text-2xl font-orbitron text-emerald-300 mb-6 tracking-widest">ðŸ¤– AI Daily Briefing</h2>
      
      <div class="grid lg:grid-cols-2 gap-8">
        <!-- Regime Analysis -->
        <div class="space-y-6">
          <div class="bg-gray-900/60 border border-emerald-400/60 rounded-xl p-6">
            <h3 class="text-lg font-orbitron text-emerald-300 mb-4 flex items-center">
              <span class="bg-emerald-500 h-2 w-2 rounded-full mr-3"></span>Current Regime
            </h3>
            <div id="ai-regime-display" class="text-gray-100 text-xl font-semibold mb-4">Loading...</div>
            
            <div class="space-y-3">
              <div>
                <h4 class="text-emerald-300 text-sm font-semibold mb-2">Key Triggers to Watch:</h4>
                <ul id="ai-triggers-list" class="space-y-1 text-sm text-gray-200">
                  <li>â€¢ Loading triggers...</li>
                </ul>
              </div>
              
              <div>
                <h4 class="text-red-300 text-sm font-semibold mb-2">Invalidation Level:</h4>
                <div id="ai-invalidation" class="text-sm text-gray-200">Loading...</div>
              </div>
            </div>
          </div>
          
          <div class="bg-gray-900/60 border border-orange-400/60 rounded-xl p-6">
            <h3 class="text-lg font-orbitron text-orange-300 mb-4 flex items-center">
              <span class="bg-orange-500 h-2 w-2 rounded-full mr-3"></span>Contrarian View (Grok)
            </h3>
            <div id="ai-grok-display" class="text-gray-100 leading-relaxed">Loading contrarian perspective...</div>
          </div>
        </div>
        
        <!-- Confidence & Action -->
        <div class="space-y-6">
          <div class="bg-gray-900/60 border border-emerald-400/60 rounded-xl p-6">
            <h3 class="text-lg font-orbitron text-emerald-300 mb-4">Signal Confidence</h3>
            <div class="flex items-center justify-center mb-4">
              <div id="ai-confidence-gauge" class="relative">
                <div class="w-32 h-32 rounded-full border-4 border-gray-600 relative">
                  <div id="ai-confidence-fill" class="absolute inset-0 rounded-full"></div>
                  <div class="absolute inset-3 bg-gray-900 rounded-full flex items-center justify-center">
                    <span id="ai-confidence-value" class="text-3xl font-bold text-emerald-300">7</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="text-center">
              <div class="text-sm text-gray-300 mb-2">Confidence Score (0-10)</div>
              <div id="ai-confidence-label" class="text-lg font-semibold text-emerald-300">High Confidence</div>
            </div>
          </div>
          
          <div class="bg-gray-900/60 border border-yellow-400/60 rounded-xl p-6">
            <h3 class="text-lg font-orbitron text-yellow-300 mb-4">Recommended Action</h3>
            <div id="ai-action-display" class="text-gray-100 leading-relaxed mb-4">Loading recommendations...</div>
            <div class="text-xs text-gray-400 border-t border-gray-600 pt-3">
              Last AI Update: <span id="ai-briefing-timestamp">â€”</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- INSIGHTS HUD HERO -->
    <section class="mb-10 rounded-2xl border-2 border-yellow-400 shadow-yellow-400/40 shadow-xl bg-gradient-to-br from-gray-900 via-gray-800 to-yellow-900 px-8 py-8">
      <h2 class="text-2xl font-orbitron text-yellow-300 mb-5 tracking-widest">ðŸ§  Market Insights from Top Minds</h2>
      <p class="mb-4 text-lg text-yellow-100">
        Curated opinions, strategies, and actionable wisdom from the most respected analysts, traders, and educators in crypto and macro. Reference these takes before every major move.
      </p>
      <div class="grid md:grid-cols-2 gap-8">
        <div class="bg-gray-900 border border-yellow-500 rounded-xl p-6 shadow">
          <h3 class="font-orbitron text-yellow-300 mb-2">Benjamin Cowen</h3>
          <blockquote class="border-l-4 border-yellow-400 pl-4 italic text-base mb-2">
            "Lengthening cycles, diminishing returns. The market will test your patience more than your intelligence."
          </blockquote>
          <div class="text-xs text-gray-400 mb-2">â€¢ Favors data-driven DCA and long-term perspective.<br>â€¢ Emphasizes macro over micro noise.</div>
          <a href="https://www.youtube.com/c/BenjaminCowen" class="text-yellow-400 underline" target="_blank" aria-label="See Benjamin Cowen's latest analysis">See Benâ€™s latest analysis &rarr;</a>
        </div>
        <div class="bg-gray-900 border border-pink-400 rounded-xl p-6 shadow">
          <h3 class="font-orbitron text-pink-300 mb-2">Bob Loukas</h3>
          <blockquote class="border-l-4 border-pink-400 pl-4 italic text-base mb-2">
            "Cycles are the heartbeat of markets. Donâ€™t fight the four-year rhythm."
          </blockquote>
          <div class="text-xs text-gray-400 mb-2">â€¢ 60-day, 4-year cycle specialist.<br>â€¢ Focus on swing trading and cycle lows.</div>
          <a href="https://www.youtube.com/c/BobLoukas" class="text-pink-400 underline" target="_blank" aria-label="See Bob Loukas's cycle views">See Bobâ€™s cycle views &rarr;</a>
        </div>
        <div class="bg-gray-900 border border-blue-400 rounded-xl p-6 shadow">
          <h3 class="font-orbitron text-blue-300 mb-2">Trader Geo</h3>
          <blockquote class="border-l-4 border-blue-400 pl-4 italic text-base mb-2">
            "When everyoneâ€™s on one side of the boat, look for the counter trade."
          </blockquote>
          <div class="text-xs text-gray-400 mb-2">â€¢ Contrarian setups.<br>â€¢ Risk-first, patience with entries.</div>
          <a href="https://twitter.com/TraderGeo1" class="text-blue-400 underline" target="_blank" aria-label="Follow Trader Geo on Twitter">Follow Trader Geo &rarr;</a>
        </div>
        <div class="bg-gray-900 border border-green-400 rounded-xl p-6 shadow">
          <h3 class="font-orbitron text-green-300 mb-2">Crypto Face</h3>
          <blockquote class="border-l-4 border-green-400 pl-4 italic text-base mb-2">
            "Donâ€™t marry your bags. Protect your capital, and the next play will come."
          </blockquote>
          <div class="text-xs text-gray-400 mb-2">â€¢ Focus on momentum, VWAP, and risk management.<br>â€¢ Known for big, decisive trades.</div>
          <a href="https://www.youtube.com/c/CryptoFace" class="text-green-400 underline" target="_blank" aria-label="Watch Crypto Face on YouTube">Watch Crypto Face &rarr;</a>
        </div>
      </div>
    </section>
    
    <!-- Consensus Meter & Action Panel -->
    <section class="mb-12 grid md:grid-cols-2 gap-8">
      <div class="bg-gray-900 border border-yellow-400 rounded-xl p-6 shadow">
        <h3 class="font-orbitron text-yellow-300 mb-2">Consensus Meter</h3>
        <ul class="list-inside text-base space-y-2">
          <li><span class="font-bold text-yellow-300">Macro:</span> Sideways/Chop</li>
          <li><span class="font-bold text-pink-400">Crypto:</span> Late cycle, be cautious</li>
          <li><span class="font-bold text-green-400">Sentiment:</span> Greed rising, beware of reversals</li>
          <li><span class="font-bold text-blue-400">Overall:</span> Defensive, risk management is key</li>
        </ul>
      </div>
      <div class="bg-gray-900 border border-pink-400 rounded-xl p-6 shadow">
        <h3 class="font-orbitron text-pink-300 mb-2">Actionable Wisdom</h3>
        <ul class="list-inside text-base space-y-2">
          <li>Wait for clear confirmation before going all-in</li>
          <li>Respect cyclesâ€”donâ€™t fight the macro trend</li>
          <li>Diversify, but donâ€™t overcomplicate</li>
          <li>Cash is a position! Donâ€™t fear the sidelines</li>
          <li>Review your scenario before each major move</li>
        </ul>
      </div>
    </section>
    
    <!-- Add Your Own Insights -->
    <section class="mb-10 bg-gray-900 border border-cyan-400 rounded-xl p-6 shadow">
      <h3 class="font-orbitron text-cyan-300 mb-3">Add Your Favorite Analysts</h3>
      <p class="mb-3 text-sm text-gray-300">Want to remember more great thinkers? Add your own links and takeaways below:</p>
      <form class="flex flex-col gap-4" aria-label="Add Analyst Form">
        <input type="text" placeholder="Name or handle" class="rounded bg-gray-800 border border-cyan-400 p-2 text-white" aria-label="Analyst Name" />
        <input type="url" placeholder="Source URL (Twitter, YouTube, Substack...)" class="rounded bg-gray-800 border border-cyan-400 p-2 text-white" aria-label="Source URL" />
        <textarea rows="2" placeholder="Key quote or insight" class="rounded bg-gray-800 border border-cyan-400 p-2 text-white" aria-label="Key Quote or Insight"></textarea>
        <button type="submit" class="hud-action bg-yellow-500 hover:bg-yellow-700 text-lg font-bold w-full" aria-label="Add Analyst to List">Add to List</button>
      </form>
    </section>

    <!-- Live Metrics -->
    <section class="live-metrics">
      <h3 class="font-orbitron text-cyan-300 mb-2">Live Metrics</h3>
      <ul class="list-inside text-base space-y-2">
        <li><span class="font-bold text-yellow-300">BTC RSI:</span> <span id="live-btc-rsi">Loading...</span></li>
        <li><span class="font-bold text-green-300">BTC 50-Day SMA:</span> <span id="live-btc-sma">Loading...</span></li>
      </ul>
    </section>
  </main>

  <footer class="text-center text-gray-400 mt-8 mb-3 text-sm">
    &copy; 2025 CyberSci-Dash. All rights reserved.
  </footer>

  <script>
    async function loadAIBriefing() {
      try {
        const res = await fetch('./data/ai_insights.json', { cache: 'no-store' });
        const ai = await res.json();
        
        // Update regime display
        if (document.getElementById('ai-regime-display')) {
          document.getElementById('ai-regime-display').textContent = ai.regime || 'No regime available';
        }
        
        // Update triggers list
        if (document.getElementById('ai-triggers-list')) {
          const triggers = Array.isArray(ai.top_triggers) ? ai.top_triggers : ['â€”', 'â€”', 'â€”'];
          const triggerHtml = triggers.map(trigger => `<li>â€¢ ${trigger}</li>`).join('');
          document.getElementById('ai-triggers-list').innerHTML = triggerHtml;
        }
        
        // Update invalidation
        if (document.getElementById('ai-invalidation')) {
          document.getElementById('ai-invalidation').textContent = ai.invalidation || 'No invalidation specified';
        }
        
        // Update Grok counter-view
        if (document.getElementById('ai-grok-display')) {
          document.getElementById('ai-grok-display').textContent = ai.grok_counter || 'No alternative view available';
        }
        
        // Update confidence score and gauge
        if (document.getElementById('ai-confidence-value')) {
          const score = ai.confidence_score || 0;
          document.getElementById('ai-confidence-value').textContent = score;
          
          // Update gauge visual
          const percentage = (score / 10) * 360;
          const fill = document.getElementById('ai-confidence-fill');
          if (fill) {
            let color;
            if (score <= 3) color = '#ef4444'; // red
            else if (score <= 6) color = '#f59e0b'; // yellow
            else color = '#10b981'; // green
            
            fill.style.background = `conic-gradient(${color} 0deg, ${color} ${percentage}deg, #374151 ${percentage}deg, #374151 360deg)`;
          }
          
          // Update confidence label
          if (document.getElementById('ai-confidence-label')) {
            let label;
            if (score <= 3) label = 'Low Confidence';
            else if (score <= 6) label = 'Moderate Confidence';
            else label = 'High Confidence';
            
            document.getElementById('ai-confidence-label').textContent = label;
          }
        }
        
        // Update action display with contextual guidance
        if (document.getElementById('ai-action-display')) {
          const contextualGuidance = ai.contextual_guidance || 'No specific guidance available';
          
          // Use contextual guidance if available, otherwise fall back to generic
          if (contextualGuidance && contextualGuidance !== 'No specific guidance available' && !contextualGuidance.includes('Error')) {
            document.getElementById('ai-action-display').textContent = contextualGuidance;
          } else {
            // Fallback generic guidance
            const confidence = ai.confidence_score || 0;
            const regime = (ai.regime || '').toLowerCase();
            
            let actionText;
            if (confidence >= 8) {
              actionText = regime.includes('bull') ? 
                'High conviction: Add risk on pullbacks. Scale positions up.' : 
                'High conviction: Reduce exposure, add hedges. Defensive positioning.';
            } else if (confidence >= 5) {
              actionText = regime.includes('bull') ? 
                'Moderate bullish: Scale in carefully. Don\'t chase breakouts.' :
                'Cautious approach: Trim positions gradually. Raise cash levels.';
            } else {
              actionText = 'Low confidence: Wait for clearer signals. Avoid major position changes.';
            }
            
            document.getElementById('ai-action-display').textContent = actionText;
          }
        }
        
        // Update timestamp
        if (document.getElementById('ai-briefing-timestamp')) {
          const updateTime = ai.updated_utc ? new Date(ai.updated_utc).toLocaleString() : 'Unknown';
          document.getElementById('ai-briefing-timestamp').textContent = updateTime;
        }
        
      } catch (error) {
        console.error('Error loading AI briefing:', error);
        // Graceful fallbacks
        const errorMsg = 'Error loading AI insights';
        if (document.getElementById('ai-regime-display')) {
          document.getElementById('ai-regime-display').innerHTML = `<span class="text-red-400">${errorMsg}</span>`;
        }
        if (document.getElementById('ai-grok-display')) {
          document.getElementById('ai-grok-display').innerHTML = `<span class="text-red-400">${errorMsg}</span>`;
        }
      }
    }
    
    // Load AI briefing on page load
    loadAIBriefing().catch(console.error);
  </script>
</body>
</html>